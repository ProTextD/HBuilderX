<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>注册页面,可用</title>
		<style type="text/css">
			span {
				color: red;
				font-size: 12px;
			}
		</style>
	</head>
	<body>
		账号:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" id="username" name="account"/><span id="usernameError"></span><br />
		密码:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="password" id="password" name="password"/><span id="pwdError"></span><br>
		确认密码:<input type="password" id="password2" /><span id="pwd2Error"></span><br>
		<input type="submit" value="提交" id="submitt"  onclick="zhuce()"/>
		<script src="./jquery-3.6.0.js"></script>
		<script type="text/javascript">
			var submittElt = document.getElementById("submitt")
			function zhuce(){
				var usernameElt = document.getElementById("username")
				var username = usernameElt.value
				
				var passwordElt = document.getElementById("password")
				var password = passwordElt.value
				
				var password2Elt = document.getElementById("password2")
				var password2 = password2Elt.value
				
				
					
				var name = $("#username").val()
				var password = $("#password").val()
				var password2 = $("#password2").val()
				var userInfo={
					"account":$("#username").val(),
					"password":$("#password").val()
				}
				
				//用户名长度合法
				//继续判断是否含有特殊符号
				var regExp = /^[A-Za-z0-9]+$/;
				var ok = regExp.test(name);
				if(name == ""){
					document.getElementById("usernameError").innerText = "用户名不能为空"
					return false
				}else if(name.length < 6 || name.length > 14){
						
						//用户名长度非法
						document.getElementById("usernameError").innerText = "用户名长度必须在[6-14]之间";
						return false
				}
				else if(!ok){
					//用户名中含有特殊符号
					document.getElementById("usernameError").innerText = "用户名只能由数字和字母组成";
					return false
				}else if(ok){
						//用户名最终合法
				}
				
				if(password == ""){
					document.getElementById("pwdError").innerText = "密码不能为空"
					return false
				}else if(password != password2){
					document.getElementById("pwd2Error").innerText = "密码不一致"
				}
				
				if(document.getElementById("usernameError").innerText == "" && document.getElementById("pwdError").innerText == "" &&document.getElementById("pwd2Error").innerText == ""){
					
					/* $.ajax({
						url:"http://192.168.3.239:8008/insertUser",
						type:"post",
						data:JSON.stringify(userInfo),
						dataType:'json',//json 返回值类型
						contentType:"application/json;charset=UTF-8",
						success: function(result){
						alert(result.msg);
						location.href = "login.html"
					},
						error:function(result){
						alert(result.msg);
					}
					}) */
					alert("111")
				}
					
					
					
				
				
			}
			
			window.onload = function(){
				//获取username的span标签
				var usernameErrorSpan = document.getElementById("usernameError");
				//给用户名文本框绑定blur事件
				var usernameElt = document.getElementById("username");
				
				//给username文本框绑定获得焦点事件
				usernameElt.onfocus = function(){
					
					//清空非法的value
					if(usernameErrorSpan.innerText != ""){
						usernameElt.value = "";
					}
					//清空span
					usernameErrorSpan.innerText = "";
				}
				
				//获取密码错误提示的span标签
				var pwd2ErrorSpan = document.getElementById("pwd2Error");
				//获取确认密码框对象
				var userpwdElt = document.getElementById("password")
				var userpwd2Elt = document.getElementById("password2");
				var pwdErrorSpan = document.getElementById("pwdError")
				
				//绑定focus事件
				userpwd2Elt.onfocus = function(){
					
					if(pwd2ErrorSpan.innerText != ""){
						userpwd2Elt.value = "";
					}
					pwd2ErrorSpan.innerText = "";
				}
				
				userpwdElt.onfocus = function(){
					if(pwdErrorSpan.innerText != ""){
						pwdErrorSpan.innerText = "";
					}
				}
			}
		</script>
	</body>
</html>
